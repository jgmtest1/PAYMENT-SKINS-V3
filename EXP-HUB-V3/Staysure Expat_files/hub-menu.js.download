$.sidebarMenu=function(b){$(b).on("click","li a",function(b){var c=$(this),a=c.next();if(a.is(".sidebar-submenu")&&a.is(":visible"))a.slideUp(300,function(){a.removeClass("menu-open");a.closest("li").hasClass("staysureHubMenu")&&$("#staysureHubTitle").find("i").css("transform","rotate(+360deg)");a.closest("li").hasClass("myStaysureHubMenu")&&$("#myStaysureHubTitle").find("i").css("transform","rotate(+360deg)")}),a.parent("li").removeClass("active");else if(a.is(".sidebar-submenu")&&!a.is(":visible")){var d=
c.parents("ul").first();d.find("ul:visible").slideUp(300).removeClass("menu-open");var e=c.parent("li");a.slideDown(300,function(){a.addClass("menu-open");d.find("li.active").removeClass("active");e.addClass("active");makeArrowDown();a.closest("li").hasClass("staysureHubMenu")&&!$("li.staysureHubMenu \x3e ul.sidebar-submenu \x3e li \x3e a").hasClass("active")&&selectStaysureSearch();a.closest("li").hasClass("myStaysureHubMenu")&&!$("li.myStaysureHubMenu \x3e ul.sidebar-submenu \x3e li \x3e a").hasClass("active")&&
("EXPAT"==productNameInMenu?selectHubMenuExceptionViewer():selectMyStaysureSearch())})}a.is(".sidebar-submenu")&&b.preventDefault()})};
$(document).ready(function(){makeArrowDown();$("#unsubscribeId").on("click",function(b){$("#loading").hide();$("#unsubscribeDialogId").modal("show")});submitUnsubscribe=function(){if(""==$("#unsubscribe_fname").val()||""==$("#unsubscribe_lname").val())errorMessage="Fill all required fields",$("#unsubscribeError").html(errorMessage),$("#unsubscribeError").show(),$("#unsubscribeSuccess").hide();else if(""==$("#unsubscribe_emailAddress").val()||isValidEmailAddress($("#unsubscribe_emailAddress").val()))if(""==
$("#unsubscribe_mobileNumber").val()||isValidTelephone($("#unsubscribe_mobileNumber").val())){$("#loading").show();var b={firstName:$("#unsubscribe_fname").val(),lastName:$("#unsubscribe_lname").val(),firstLineOfAddress:$("#unsubscribe_address").val(),postCode:$("#unsubscribe_postcode").val(),emailAddress:$("#unsubscribe_emailAddress").val(),mobileNumber:$("#unsubscribe_mobileNumber").val()};$.ajax({url:"/@hub.context@/saveUnsubscribeNotOnHub",type:"POST",data:JSON.stringify(b),contentType:"application/json",
success:function(b){$("#loading").hide();1==b.success&&(successMessage="The unsubscribe request has been processed. The customer will be unsubscribed within 28 days.",$("#unsubscribeSuccess").html(successMessage),$("#unsubscribe_fname").val(""),$("#unsubscribe_lname").val(""),$("#unsubscribe_address").val(""),$("#unsubscribe_postcode").val(""),$("#unsubscribe_emailAddress").val(""),$("#unsubscribe_mobileNumber").val(""),$("#unsubscribeError").hide(),$("#unsubscribeSuccess").show())},error:function(){$("#loading").hide();
errorMessage="Unsubscribe Save error";$("#unsubscribeError").html(errorMessage);$("#unsubscribeError").show();$("#unsubscribeSuccess").hide()}})}else errorMessage="Enter valid telephone number",$("#unsubscribeError").html(errorMessage),$("#unsubscribeError").show(),$("#unsubscribeSuccess").hide();else errorMessage="Enter valid email",$("#unsubscribeError").html(errorMessage),$("#unsubscribeError").show(),$("#unsubscribeSuccess").hide()};isValidEmailAddress=function(b){return/^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i.test(b)};
isValidTelephone=function(b){return/^(\+\d{1,3}[- ]?)?\d{10,16}$/.test(b)};cancelUnsubscribe=function(){$("#unsubscribe_fname").val("");$("#unsubscribe_lname").val("");$("#unsubscribe_address").val("");$("#unsubscribe_postcode").val("");$("#unsubscribe_emailAddress").val("");$("#unsubscribe_mobileNumber").val("");$("#unsubscribeError").hide();$("#unsubscribeSuccess").hide()}});
var makeArrowDown=function(){$("#staysureHubTitle").length&&$("#staysureHubTitle").hasClass("menu-open")&&$("#staysureHubTitle").find("i").css("transform","rotate(-90deg)");$("#myStaysureHubTitle").length&&$("#myStaysureHubTitle").hasClass("menu-open")&&$("#myStaysureHubTitle").find("i").css("transform","rotate(-90deg)")},selectStaysureSearch=function(){window.location=$("#staysureHubSearch").attr("href")},selectMyStaysureSearch=function(){window.location=$("#myStaysureHubSearch").attr("href")},selectHubMenuExceptionViewer=
function(){window.location=$("#hubMenuExceptionViewer").attr("href")};